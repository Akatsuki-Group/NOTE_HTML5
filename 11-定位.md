> 笔记来源：[尚硅谷Web前端HTML5&CSS3初学者零基础入门全套完整版](https://www.bilibili.com/video/BV1XJ411X7Ud)

[TOC]

# 定位的简介

**需求分析**

![image-20210528210321699](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528210322.png)

按照我们之前所学知识，可以怎么实现呢？

应该来说不难，很容易实现

```css
.box2 {
    width: 200px;
    height: 200px;
    background-color: yellow;
    /* 左外边距、上外边距 */
    margin-left: 200px;
    margin-top: -200px;
}

.box3 {
    width: 200px;
    height: 200px;
    background-color: orange;
    /* 上外边距 */
    margin-top: 200px;
}
```

我们分别给box2和box3添加了外边距之后，就可以达到需求效果

![image-20210528210703375](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528210704.png)

当然也可以使用浮动来解决上述问题，但稍微麻烦一点

不管怎样，问题也是显而易见。我们实际开发中，页面上的元素可能很多，这样改必然是 <q>牵一发而动全身</q>

那么仅仅靠我们之前学习的布局知识，不足以轻松应对这种场景

那么就势必需要一个方便我们处理这种场景的办法，它就是<q>定位</q>

![img](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528224417.gif)

**定位（position）**

定位是一种更加高级的布局手段

通过定位可以将元素摆放到页面的任意位置

使用`position`属性来设置定位

| 可选值     | 含义                             |
| :--------- | :------------------------------- |
| `static`   | 不开启定位，元素是静止的，默认值 |
| `relative` | 开启元素的绝对定位               |
| `absolute` | 开启元素的绝对定位               |
| `fixed `   | 开启元素的固定定位               |
| `sticky `  | 开启元素的粘滞定位               |

![img](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528224538.gif)

## 1. 相对定位

当元素的position属性值设置为`relative`时，则开启了元素的相对定位

![img](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528224319.jpg)

### 偏移量（offset）

当元素开启相对定位以后，可以通过偏移量来设置元素的位置

| offset属性 | 含义                         |
| :--------- | :--------------------------- |
| `top`      | 定位元素和定位位置的上边距离 |
| `bottom`   | 定位元素和定位位置的下边距离 |
| `left`     | 定位元素和定位位置的左侧距离 |
| `right`    | 定位元素和定位位置的右侧距离 |

定位元素垂直方向的位置由`top`和`bottom`两个属性控制，通常情况下只会使用其中之一

- `top`值越大，定位元素越靠下
- `bottom`值越大，定位元素靠上

定位元素水平方向的位置由`left`和`right`两个属性控制，通常情况下只会使用其中之一

- `left`越大，定位元素越靠右
- `right`越大，定位元素越靠左

ok，介绍完相对布局，我们的需求是不是变得so easy！

![img](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528224829.gif)

```css
.box2 {
    width: 200px;
    height: 200px;
    background-color: yellow;
    /* 开启相对定位 */
    position: relative;
    top: -200px;
    left: 200px;
}
```

我们给box2设置相对定位，就得到了我们想要的页面效果

![image-20210528212227760](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528212228.png)

可以看出，使用了相对定位后，只会移动自身的布局位置，而不会对已存在的其他元素产生任何影响

现在我们所举的例子不是很明显，但当页面布局比较复杂，特别是页面元素很多的时候，其优越性就可以大大体现出来

![img](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528225003.gif)

### 相对定位的特点

1. 当元素开启相对定位以后，如果不设置偏移量元素，则元素不会发生任何变化（这里注意，不仅仅是位置）

2. 相对定位是<mark>参照于元素在文档流中的位置进行定位的</mark>（即相对于自身原始位置）

3. 相对定位会<mark>提升元素的层级</mark>（表现为可以覆盖其他元素）

   ![动画2021-25](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528213525.gif)

4. 相对定位<mark>不会改变元素的性质</mark>：块还是块，行内还是行内

**Q1：如果给上述三个div都设置相对定位，那么它们的层级关系会是什么样的呢？或者说谁会被谁覆盖呢？**

A：<q>百闻不如一见</q>，<q>光说不练假把式</q>，我们直接进行测试验证

![image-20210528214204685](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528214205.png)

可以看到覆盖关系是：box3 >> box2 >> box1

我们再稍微调整下box3和box2的前后位置

![image-20210528214718203](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528214719.png) 

会发现覆盖关系变成了：box2 >> box3 >> box1

可以大概猜测：在页面文档流中，越靠下的元素开启相对定位后，其层级越高（这里也只是我个人的揣测，待后续学习中验证）

**Q2：相对定位的第三个特点<q>相对定位会提升元素的层级</q>，是不是就类似于浮动一样脱离了文档流？**

A：我们可以对比下，浮动和相对定位的区别

- 参考系不同：浮动的参考系是其父元素；相对定位是相对于自身
- 可移动方向不同：浮动只能左右移动；相对定位是上下左右移动
- 影响不同：浮动会影响页面布局（包括下方元素位置影响和高度塌陷问题）；相对定位不对影响页面布局
- 性质不同：浮动会改变元素的性质（不再独占一行，其宽高都会被内容撑开）；相对定位不会改变元素的性质
- 文字环绕：浮动不会覆盖文字；相对定位可以覆盖文字（这个可以自行验证，不再赘述）

当然，浮动和相对定位也有其相似之处

- 浮动和相对定位都是移动位置（貌似是废话）
- 浮动和相对定位不会从父元素中移出

可以看出，浮动和相对定位的区别是更多的

最后回答一点：浮动脱离了文档流，不再占据页面位置；相对定位仍然占据页面位置（所以怎么能够叫 <q>脱离文档流</q> 呢？）

![img](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528225125.gif)

**Q3：相对定位的第四个特点<q>相对定位不会改变元素的性质：块还是块，行内还是行内</q>，但是上述例子中元素开启相对定位后好像就不再独占一行了，这个怎么理解？**

A：相比于浮动元素的特点，相对定位不会改变元素的性质其实是一个相对不容易理解的问题。但其实也不难，可以把相对定位认为是元素的<q>灵魂出窍</q>。其位置发生改变以后，布局并没有产生影响，因为它的<q>肉体</q>仍然占据着原来的那个位置。只是其<q>灵魂</q>（内容）发生了移动。

![img](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528225224.jpg)

**Q4：相对定位的第四个特点中<q>块还是块，行内还是行内</q>，意味着行内元素也可以使用相对定位是吗？**

A：<q>眼见为实，耳听为虚</q>，直接看示例效果

![动画2021-24](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528223748.gif)

善于思考是好事，但也别忘了<q>自动动手，丰衣足食</q>。自己实操一遍，胜过千言万语

![img](https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210528225256.gif)



## 2. 绝对定位

当元素的`position`属性值设置为`absolute`时，则开启了元素的绝对定位

### 绝对定位的特点

1. 开启绝对定位后，如果不设置偏移量，元素的位置不会发生变化
2. 开启绝对定位后，元素会<mark>从文档流中脱离</mark>
3. 绝对定位会<mark>改变元素的性质</mark>：行内变成块，块的宽高被内容撑开
4. 绝对定位会<mark>使元素提升一个层级</mark>
5. 绝对定位元素是<mark>相对于其包含块进行定位的</mark>

### 包含块（containing block）

正常情况下：

- 包含块就是离当前元素最近的开启了定位的祖先块元素
- 如果所有的祖先元素都没有开启定位，则`html（根元素、初始包含块）`就是它的包含块

```html
<!-- box2的包含块可以是box1 -->
<div class="box1">
    <div class="box2"></div>
</div>

<!-- em的包含块可以是box3 -->
<div class="box3">
    <span>
        <em>hello</em>
    </span>
</div>
```



## 3. 固定定位

## 4. 粘滞定位